        function updateStrategySignals() {
            const strategy = getEnhancedStrategyRecommendation();

            document.getElementById('enhanced-strategy').textContent = strategy.action;
            document.getElementById('enhanced-strategy').className = `strategy-indicator ${
                strategy.action.includes('BUY') ? 'status-good' :
                strategy.action.includes('SELL') ? 'status-danger' : 'status-warning'
            }`;

            // Update signal scores (simplified scoring system)
            let fundamentalScore = 0;
            let technicalScore = 0;

            // Fundamental scoring
            if (stockData.balticsry > 2500) fundamentalScore += 3;
            else if (stockData.balticsry < 1500) fundamentalScore -= 3;

            if (stockData.price < 7.50) fundamentalScore += 2;
            else if (stockData.price > 12.00) fundamentalScore -= 2;

            // Technical scoring
            if (technicalData.rsi < 30) technicalScore += 2;<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CMB.TECH Investment Watchdog</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .position-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .position-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            transform: translateY(0);
            transition: transform 0.3s ease;
        }

        .position-card:hover {
            transform: translateY(-5px);
        }

        .position-card h3 {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .position-card .value {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
        }

        .widget {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .widget h2 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: #1e3c72;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #eee;
        }

        .metric:last-child {
            border-bottom: none;
        }

        .metric-label {
            font-weight: 500;
            color: #666;
        }

        .metric-value {
            font-weight: 700;
            font-size: 1.1rem;
        }

        .status-good { color: #16a085; }
        .status-warning { color: #f39c12; }
        .status-danger { color: #e74c3c; }

        .update-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .update-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .alert-box {
            background: linear-gradient(135deg, #ff7675 0%, #fd79a8 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 10px 20px rgba(255, 118, 117, 0.3);
        }

        .alert-box h3 {
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        .news-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
        }

        .news-item h4 {
            color: #1e3c72;
            margin-bottom: 8px;
            font-size: 1rem;
        }

        .news-item p {
            color: #666;
            font-size: 0.9rem;
        }

        .timestamp {
            color: #999;
            font-size: 0.8rem;
            margin-top: 10px;
        }

        .action-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .action-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .btn-buy {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white;
        }

        .btn-hold {
            background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%);
            color: white;
        }

        .btn-sell {
            background: linear-gradient(135deg, #d63031 0%, #74b9ff 100%);
            color: white;
        }

        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .strategy-indicator {
            font-size: 1.5rem;
            font-weight: 700;
            text-align: center;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        .chart-placeholder {
            background: linear-gradient(135deg, #f1f2f6 0%, #e8eaed 100%);
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            color: #666;
            border: 2px dashed #ddd;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä CMB.TECH Investment Watchdog</h1>
            <p><strong>Monitoring your 982 share position ‚Ä¢ Real-time strategy updates</strong></p>

            <div class="position-summary">
                <div class="position-card">
                    <h3>SHARES OWNED</h3>
                    <div class="value">
                        <input type="number"
                               id="shares-input"
                               value="982"
                               min="1"
                               max="999999"
                               style="background: transparent; border: 2px solid rgba(255,255,255,0.3); border-radius: 8px; padding: 8px; color: white; font-size: 1.5rem; font-weight: 700; text-align: center; width: 120px;"
                               onchange="updateSharesOwned()"
                               onkeypress="if(event.key==='Enter') updateSharesOwned()">
                    </div>
                    <small style="opacity: 0.8; font-size: 0.8rem;">Click to edit</small>
                </div>
                <div class="position-card">
                    <h3>CURRENT VALUE</h3>
                    <div class="value" id="position-value">$68,000</div>
                </div>
                <div class="position-card">
                    <h3>CURRENT PRICE</h3>
                    <div class="value" id="current-price">$8.50</div>
                </div>
                <div class="position-card">
                    <h3>TODAY'S P&L</h3>
                    <div class="value" id="daily-pl">-$320</div>
                </div>
            </div>
        </div>

        <div id="strategy-alert" class="alert-box">
            <h3>üéØ Current Strategy: CAUTIOUS HOLD</h3>
            <p>Market correctly pricing dry bulk downturn. Golden Ocean fleet losing money. Monitor for improvement signals before adding.</p>
        </div>

        <div class="dashboard">
            <!-- Stock Performance Widget -->
            <div class="widget">
                <h2>üìà Stock Performance</h2>
                <button class="update-btn" onclick="updateStockData()">Update Stock Data</button>

                <div class="metric">
                    <span class="metric-label">Current Price</span>
                    <span class="metric-value" id="stock-price">$8.50</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Daily Change</span>
                    <span class="metric-value status-danger" id="daily-change">-1.2% (-$0.10)</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Analyst Target</span>
                    <span class="metric-value">$18.50</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Discount to NAV</span>
                    <span class="metric-value status-danger">-43.1%</span>
                </div>

                <div class="chart-container">
                    <!-- TradingView Widget BEGIN -->
                    <div class="tradingview-widget-container" style="height: 400px; width: 100%;">
                        <div class="tradingview-widget-container__widget" style="height: calc(100% - 32px); width: 100%;"></div>
                        <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                        {
                            "autosize": true,
                            "symbol": "NYSE:CMBT",
                            "interval": "D",
                            "timezone": "Etc/UTC",
                            "theme": "light",
                            "style": "1",
                            "locale": "en",
                            "enable_publishing": false,
                            "backgroundColor": "rgba(255, 255, 255, 1)",
                            "gridColor": "rgba(240, 243, 250, 0)",
                            "hide_top_toolbar": false,
                            "hide_legend": false,
                            "save_image": false,
                            "container_id": "tradingview_chart",
                            "studies": [
                                "RSI@tv-basicstudies",
                                "MACD@tv-basicstudies",
                                "Volume@tv-basicstudies"
                            ],
                            "show_popup_button": true,
                            "popup_width": "1000",
                            "popup_height": "650"
                        }
                        </script>
                    </div>
                    <!-- TradingView Widget END -->
                </div>
            </div>

            <!-- Key Metrics Widget -->
            <div class="widget">
                <h2>‚ö° Critical Metrics</h2>
                <button class="update-btn" onclick="updateMetrics()">Refresh Metrics</button>

                <div class="metric">
                    <span class="metric-label">Baltic Dry Index</span>
                    <span class="metric-value status-warning" id="bdi">1,944</span>
                </div>
                <div class="metric">
                    <span class="metric-label">BDI Trend (30-day)</span>
                    <span class="metric-value status-danger">-8.3%</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Q2 2025 Net Income</span>
                    <span class="metric-value status-danger">-$7.6M</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Revenue Growth</span>
                    <span class="metric-value status-good">+54%</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Fleet Size</span>
                    <span class="metric-value">250+ vessels</span>
                </div>
            </div>

            <!-- Technical Analysis & Divergence Widget -->
            <div class="widget">
                <h2>üìà Technical Analysis & Divergence Signals</h2>
                <button class="update-btn" onclick="updateTechnicalAnalysis()">Analyze Divergences</button>

                <div class="metric">
                    <span class="metric-label">RSI (14)</span>
                    <span class="metric-value" id="rsi-value">42.3</span>
                </div>
                <div class="metric">
                    <span class="metric-label">MACD Signal</span>
                    <span class="metric-value status-warning" id="macd-signal">Bearish</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Price Trend</span>
                    <span class="metric-value status-danger" id="price-trend">Downtrend</span>
                </div>

                <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
                    <h4 style="color: #1e3c72; margin-bottom: 15px;">üîç Divergence Analysis</h4>

                    <div class="metric">
                        <span class="metric-label">Bullish Divergence</span>
                        <span class="metric-value" id="bullish-div">‚ùå None Detected</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Bearish Divergence</span>
                        <span class="metric-value" id="bearish-div">‚ö†Ô∏è Monitoring</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Volume Divergence</span>
                        <span class="metric-value" id="volume-div">üìä Analyzing</span>
                    </div>
                </div>

                <div style="margin-top: 15px; padding: 15px; background: #e8f5e8; border-radius: 10px; border-left: 4px solid #00b894;">
                    <h5 style="color: #00695c; margin-bottom: 10px;">Technical Buy Signals:</h5>
                    <div class="metric">
                        <span class="metric-label">RSI < 30 (Oversold)</span>
                        <span class="metric-value" id="rsi-oversold">‚ùå RSI: 42.3</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Bullish RSI Divergence</span>
                        <span class="metric-value" id="bullish-rsi-div">‚è≥ Waiting</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">MACD Bullish Cross</span>
                        <span class="metric-value" id="macd-cross">‚ùå No Signal</span>
                    </div>
                </div>

                <div style="margin-top: 15px; padding: 15px; background: #ffe8e8; border-radius: 10px; border-left: 4px solid #e74c3c;">
                    <h5 style="color: #c0392b; margin-bottom: 10px;">Technical Sell Signals:</h5>
                    <div class="metric">
                        <span class="metric-label">RSI > 70 (Overbought)</span>
                        <span class="metric-value" id="rsi-overbought">‚ùå RSI: 42.3</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Bearish RSI Divergence</span>
                        <span class="metric-value" id="bearish-rsi-div">‚ùå None</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Break Below $7.50</span>
                        <span class="metric-value" id="support-break">‚úÖ Above Support</span>
                    </div>
                </div>
            </div>
            <div class="widget">
                <h2>üéØ Strategy Signals</h2>

                <div class="strategy-indicator status-warning">
                    CAUTIOUS HOLD
                </div>

                <div class="metric">
                    <span class="metric-label">BUY Signal</span>
                    <span class="metric-value status-danger">‚ùå BDI < 2,500</span>
                </div>
                <div class="metric">
                    <span class="metric-label">HOLD Signal</span>
                    <span class="metric-value status-good">‚úÖ Current</span>
                </div>
                <div class="metric">
                    <span class="metric-label">SELL Signal</span>
                    <span class="metric-value status-warning">‚ö†Ô∏è BDI < 1,500</span>
                </div>

                <div class="action-buttons">
                    <button class="action-btn btn-buy" onclick="logAction('BUY')">BUY MORE</button>
                    <button class="action-btn btn-hold" onclick="logAction('HOLD')">HOLD</button>
                    <button class="action-btn btn-sell" onclick="logAction('SELL')">SELL</button>
                </div>
            </div>

            <!-- Risk Monitoring Widget -->
            <div class="widget">
                <h2>‚ö†Ô∏è Risk Monitor</h2>

                <div class="metric">
                    <span class="metric-label">Dry Bulk Market</span>
                    <span class="metric-value status-danger">HIGH RISK</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Integration Risk</span>
                    <span class="metric-value status-warning">MEDIUM</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Insider Selling</span>
                    <span class="metric-value status-good" id="insider-status">NONE DETECTED</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Debt/Equity Ratio</span>
                    <span class="metric-value status-warning">1.83</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Cash Position</span>
                    <span class="metric-value" id="cash-position">Monitoring...</span>
                </div>
            </div>

            <!-- News & Alerts Widget -->
            <div class="widget">
                <h2>üì∞ Latest Updates</h2>
                <button class="update-btn" onclick="updateNews()">Refresh News</button>

                <div id="news-container">
                    <div class="news-item">
                        <h4>Golden Ocean Merger Completed</h4>
                        <p>Merger closed Aug 20, 2025. CMB.TECH now operates 250+ vessels. Monitoring integration progress.</p>
                        <div class="timestamp">Aug 20, 2025</div>
                    </div>
                    <div class="news-item">
                        <h4>Q2 2025 Results: Revenue Up, Net Loss</h4>
                        <p>Revenue +54% to $387.8M but net loss of $7.6M due to integration costs and weak dry bulk rates.</p>
                        <div class="timestamp">Aug 14, 2025</div>
                    </div>
                    <div class="news-item">
                        <h4>Dry Bulk Market Depression</h4>
                        <p>Baltic Dry Index down 21% Mar-Apr 2025. 541 new vessels delivering in 2025 - highest since 2016.</p>
                        <div class="timestamp">Ongoing</div>
                    </div>
                </div>
            </div>

            <!-- Triggers Widget -->
            <div class="widget">
                <h2>üö® Action Triggers</h2>

                <div>
                    <h3 style="color: #16a085; margin-bottom: 10px;">üü¢ STRONG BUY Triggers:</h3>
                    <div class="metric">
                        <span class="metric-label">Baltic Dry Index > 2,500</span>
                        <span class="metric-value status-danger">‚ùå Currently 1,944</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Price < $7.50</span>
                        <span class="metric-value status-danger">‚ùå $8.50</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">RSI < 30 + Bullish Divergence</span>
                        <span class="metric-value status-danger">‚ùå RSI: 42.3</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">MACD Bullish Cross</span>
                        <span class="metric-value status-danger">‚ùå No Signal</span>
                    </div>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="color: #f39c12; margin-bottom: 10px;">üü° MODERATE BUY Triggers:</h3>
                    <div class="metric">
                        <span class="metric-label">BDI > 2,000 + RSI < 40</span>
                        <span class="metric-value status-danger">‚ùå BDI: 1,944, RSI: 42.3</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Bullish RSI Divergence Only</span>
                        <span class="metric-value status-warning">‚è≥ Monitoring</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Volume Surge + Support Hold</span>
                        <span class="metric-value status-good">‚úÖ Above $7.50</span>
                    </div>
                </div>

                <div>
                    <h3 style="color: #e74c3c; margin-bottom: 10px;">üî¥ SELL Triggers:</h3>
                    <div class="metric">
                        <span class="metric-label">BDI < 1,500</span>
                        <span class="metric-value status-good">‚úÖ Above threshold</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Bearish RSI Divergence</span>
                        <span class="metric-value status-good">‚úÖ None detected</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Break Below $7.50</span>
                        <span class="metric-value status-good">‚úÖ Above support</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">RSI > 70 + Bearish Divergence</span>
                        <span class="metric-value status-good">‚úÖ RSI: 42.3</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Management Selling</span>
                        <span class="metric-value status-good">‚úÖ None detected</span>
                    </div>
                </div>
            </div>

            <!-- Daily Summary Widget -->
            <div class="widget">
                <h2>üìã Daily Summary</h2>
                <div id="daily-summary">
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                        <h4 style="color: #1e3c72; margin-bottom: 10px;">Today's Assessment:</h4>
                        <p><strong>HOLD POSITION</strong> - No immediate action required. Monitor Q3 results and Baltic Dry Index trends.</p>
                    </div>

                    <div style="background: #fff3cd; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                        <h4 style="color: #856404; margin-bottom: 10px;">Key Watchpoints:</h4>
                        <ul style="margin-left: 20px; color: #666;">
                            <li>Baltic Dry Index staying above 1,500</li>
                            <li>Q3 2025 results (expected Nov 2025)</li>
                            <li>Integration cost reduction signs</li>
                            <li>Any insider trading activity</li>
                        </ul>
                    </div>
                </div>

                <div class="timestamp" id="last-update">Last updated: Aug 25, 2025 - 2:30 PM EST</div>
            </div>
        </div>
    </div>

    <script>
        // Simulated data - In real implementation, connect to APIs
        let stockData = {
            price: 8.50,
            change: -0.10,
            changePercent: -1.16,
            volume: 105928,
            balticsry: 1944,
            lastUpdate: new Date()
        };

        let position = {
            shares: 982,
            avgCost: 8.50,
            currentValue: 68000
        };

        function updateStockData() {
            // Simulate real-time data updates
            const btn = event.target;
            btn.textContent = 'Updating...';
            btn.disabled = true;

            setTimeout(() => {
                // Simulate small price movements
                const randomChange = (Math.random() - 0.5) * 0.20;
                stockData.price += randomChange;
                stockData.change = randomChange;
                stockData.changePercent = (randomChange / (stockData.price - randomChange)) * 100;

                updateDisplay();
                btn.textContent = 'Update Stock Data';
                btn.disabled = false;

                showNotification('Stock data updated!');
            }, 1500);
        }

        function updateMetrics() {
            const btn = event.target;
            btn.textContent = 'Updating...';
            btn.disabled = true;

            setTimeout(() => {
                // Simulate Baltic Dry Index update
                stockData.balticsry += Math.floor((Math.random() - 0.5) * 100);
                document.getElementById('bdi').textContent = stockData.balticsry.toLocaleString();

                btn.textContent = 'Refresh Metrics';
                btn.disabled = false;

                checkTriggers();
                showNotification('Metrics updated!');
            }, 1500);
        }

        function updateNews() {
            const btn = event.target;
            btn.textContent = 'Fetching...';
            btn.disabled = true;

            setTimeout(() => {
                // Add simulated new news item
                const newsContainer = document.getElementById('news-container');
                const newItem = document.createElement('div');
                newItem.className = 'news-item';
                newItem.innerHTML = `
                    <h4>Market Update</h4>
                    <p>Baltic Dry Index: ${stockData.balticsry}. CMB.TECH continues integration process. No major developments.</p>
                    <div class="timestamp">${new Date().toLocaleDateString()}</div>
                `;
                newsContainer.insertBefore(newItem, newsContainer.firstChild);

                btn.textContent = 'Refresh News';
                btn.disabled = false;

                showNotification('News updated!');
            }, 2000);
        }

        function logAction(action) {
            const timestamp = new Date().toLocaleString();
            console.log(`${timestamp}: User considering ${action} action`);

            let message = '';
            switch(action) {
                case 'BUY':
                    message = '‚ö†Ô∏è Remember: Only buy if BDI > 2,500 or price < $7.50';
                    break;
                case 'HOLD':
                    message = '‚úÖ Correct strategy given current market conditions';
                    break;
                case 'SELL':
                    message = '‚ö†Ô∏è Only sell if BDI < 1,500 or major insider selling detected';
                    break;
            }

            showNotification(message);
        }

        function updateDisplay() {
            document.getElementById('current-price').textContent = `${stockData.price.toFixed(2)}`;
            document.getElementById('stock-price').textContent = `${stockData.price.toFixed(2)}`;
            document.getElementById('position-value').textContent = `${(stockData.price * position.shares).toLocaleString()}`;
            document.getElementById('daily-change').textContent = `${stockData.changePercent.toFixed(2)}% (${stockData.change >= 0 ? '+' : ''}${stockData.change.toFixed(2)})`;
            document.getElementById('daily-pl').textContent = `${stockData.change >= 0 ? '+' : ''}${(stockData.change * position.shares).toFixed(0)}`;
            document.getElementById('last-update').textContent = `Last updated: ${new Date().toLocaleString()}`;

            // Update shares input field to reflect current position
            document.getElementById('shares-input').value = position.shares;

            // Update color coding
            const changeElement = document.getElementById('daily-change');
            const plElement = document.getElementById('daily-pl');

            if (stockData.change >= 0) {
                changeElement.className = 'metric-value status-good';
                plElement.className = 'value status-good';
            } else {
                changeElement.className = 'metric-value status-danger';
                plElement.className = 'value status-danger';
            }
        }

        function checkTriggers() {
            const alertBox = document.getElementById('strategy-alert');

            if (stockData.balticsry < 1500) {
                alertBox.innerHTML = `
                    <h3>üö® SELL SIGNAL TRIGGERED</h3>
                    <p>Baltic Dry Index below 1,500 (${stockData.balticsry}). Consider reducing position.</p>
                `;
                alertBox.style.background = 'linear-gradient(135deg, #d63031 0%, #74b9ff 100%)';
            } else if (stockData.balticsry > 2500 || stockData.price < 7.50) {
                alertBox.innerHTML = `
                    <h3>üéØ BUY SIGNAL TRIGGERED</h3>
                    <p>Conditions met for accumulation. Consider adding to position.</p>
                `;
                alertBox.style.background = 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)';
            } else {
                alertBox.innerHTML = `
                    <h3>üéØ Current Strategy: CAUTIOUS HOLD</h3>
                    <p>Market correctly pricing dry bulk downturn. Golden Ocean fleet losing money. Monitor for improvement signals.</p>
                `;
                alertBox.style.background = 'linear-gradient(135deg, #ff7675 0%, #fd79a8 100%)';
            }
        }

        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
                z-index: 1000;
                font-weight: 600;
                transform: translateX(400px);
                transition: transform 0.3s ease;
            `;
            notification.textContent = message;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);

            setTimeout(() => {
                notification.style.transform = 'translateX(400px)';
                setTimeout(() => document.body.removeChild(notification), 300);
            }, 3000);
        }

        // Auto-update every 5 minutes
        setInterval(() => {
            if (Math.random() > 0.7) { // 30% chance of update
                updateStockData();
                setTimeout(updateMetrics, 1000);
            }
        }, 300000);

        // Initialize display
        updateDisplay();
        checkTriggers();

        // Daily summary update
        function updateDailySummary() {
            const summaryElement = document.getElementById('daily-summary');
            const currentHour = new Date().getHours();

            let timeOfDay = 'morning';
            if (currentHour >= 12 && currentHour < 17) timeOfDay = 'afternoon';
            if (currentHour >= 17) timeOfDay = 'evening';

            let summary = `
                <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                    <h4 style="color: #1e3c72; margin-bottom: 10px;">${timeOfDay === 'morning' ? 'Morning' : timeOfDay === 'afternoon' ? 'Afternoon' : 'Evening'} Assessment:</h4>
                    <p><strong>HOLD POSITION</strong> - CMB.TECH at $${stockData.price.toFixed(2)}. `;

            if (stockData.balticsry < 1500) {
                summary += `Baltic Dry Index critically low at ${stockData.balticsry}. Consider exit strategy.`;
            } else if (stockData.balticsry > 2500) {
                summary += `Baltic Dry Index improving at ${stockData.balticsry}. Market recovery signs emerging.`;
            } else {
                summary += `Baltic Dry Index at ${stockData.balticsry}. Cautious monitoring continues.`;
            }

            summary += `</p></div>`;

            // Add key watchpoints
            summary += `
                <div style="background: #fff3cd; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                    <h4 style="color: #856404; margin-bottom: 10px;">Key Watchpoints:</h4>
                    <ul style="margin-left: 20px; color: #666;">
                        <li>Baltic Dry Index staying above 1,500 (Current: ${stockData.balticsry})</li>
                        <li>Q3 2025 results (expected Nov 2025)</li>
                        <li>Integration cost reduction signs</li>
                        <li>Any insider trading activity</li>
                        <li>Chinese economic stimulus announcements</li>
                    </ul>
                </div>
            `;

            summaryElement.innerHTML = summary;
        }

        // Update summary periodically
        updateDailySummary();
        setInterval(updateDailySummary, 3600000); // Update every hour

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey) {
                switch(e.key) {
                    case 'u':
                        e.preventDefault();
                        updateStockData();
                        break;
                    case 'm':
                        e.preventDefault();
                        updateMetrics();
                        break;
                    case 'n':
                        e.preventDefault();
                        updateNews();
                        break;
                }
            }
        });

        // Show tips on load
        setTimeout(() => {
            showNotification('üí° Use Ctrl+U to update stock data, Ctrl+M for metrics, Ctrl+N for news');
        }, 2000);
        // Enhanced monitoring functions
        function monitorKeyLevels() {
            const alerts = [];

            // Critical price levels
            if (stockData.price < 7.50) {
                alerts.push({
                    type: 'buy',
                    message: 'STRONG BUY: Price below $7.50 support level',
                    urgency: 'high'
                });
            }

            if (stockData.price > 12.00) {
                alerts.push({
                    type: 'sell',
                    message: 'TAKE PROFITS: Price above $12.00 resistance',
                    urgency: 'medium'
                });
            }

            // Baltic Dry Index alerts
            if (stockData.balticsry < 1500) {
                alerts.push({
                    type: 'sell',
                    message: 'CRITICAL: Baltic Dry Index below 1,500 - Market depression',
                    urgency: 'high'
                });
            }

            if (stockData.balticsry > 2500) {
                alerts.push({
                    type: 'buy',
                    message: 'OPPORTUNITY: Baltic Dry Index above 2,500 - Market recovery',
                    urgency: 'high'
                });
            }

            return alerts;
        }

        function generateDailyReport() {
            const alerts = monitorEnhancedLevels();
            const positionValue = stockData.price * position.shares;
            const dayChange = stockData.change * position.shares;
            const strategy = getEnhancedStrategyRecommendation();

            const report = {
                timestamp: new Date().toISOString(),
                position: {
                    shares: position.shares,
                    currentPrice: stockData.price,
                    totalValue: positionValue,
                    dailyPL: dayChange
                },
                marketMetrics: {
                    balticDryIndex: stockData.balticsry,
                    priceToNAV: ((stockData.price / 14.94) * 100).toFixed(1) + '%',
                    rsi: technicalData.rsi.toFixed(1),
                    macd: technicalData.macdHistogram.toFixed(3)
                },
                strategy: strategy,
                alerts: alerts,
                nextEarnings: 'Q3 2025 - Expected November 2025'
            };

            console.log('Daily Report Generated:', report);
            return report;
        }

        // Technical Analysis Data
        let technicalData = {
            rsi: 42.3,
            macd: -0.15,
            macdSignal: -0.08,
            macdHistogram: -0.07,
            volume: 105928,
            sma20: 8.95,
            sma50: 9.42,
            support: 7.50,
            resistance: 10.25,
            priceHistory: [8.50, 8.60, 8.45, 8.38, 8.52, 8.41, 8.50], // Last 7 days
            rsiHistory: [42.3, 41.8, 43.1, 44.2, 42.9, 41.5, 42.3],
            volumeHistory: [105928, 98450, 112300, 87650, 95420, 103200, 105928]
        };

        function updateTechnicalAnalysis() {
            const btn = event.target;
            btn.textContent = 'Analyzing...';
            btn.disabled = true;

            setTimeout(() => {
                // Simulate technical indicator updates
                technicalData.rsi += (Math.random() - 0.5) * 5;
                technicalData.rsi = Math.max(0, Math.min(100, technicalData.rsi));

                technicalData.macd += (Math.random() - 0.5) * 0.1;
                technicalData.macdSignal += (Math.random() - 0.5) * 0.08;
                technicalData.macdHistogram = technicalData.macd - technicalData.macdSignal;

                updateTechnicalDisplay();
                checkDivergences();

                btn.textContent = 'Analyze Divergences';
                btn.disabled = false;

                showNotification('Technical analysis updated!');
            }, 2000);
        }

        function updateTechnicalDisplay() {
            document.getElementById('rsi-value').textContent = technicalData.rsi.toFixed(1);
            document.getElementById('macd-signal').textContent = technicalData.macdHistogram > 0 ? 'Bullish' : 'Bearish';
            document.getElementById('price-trend').textContent = stockData.price > technicalData.sma20 ? 'Uptrend' : 'Downtrend';

            // Update RSI status
            const rsiOversold = document.getElementById('rsi-oversold');
            const rsiOverbought = document.getElementById('rsi-overbought');

            if (technicalData.rsi < 30) {
                rsiOversold.textContent = `‚úÖ OVERSOLD: ${technicalData.rsi.toFixed(1)}`;
                rsiOversold.className = 'metric-value status-good';
            } else {
                rsiOversold.textContent = `‚ùå RSI: ${technicalData.rsi.toFixed(1)}`;
                rsiOversold.className = 'metric-value status-danger';
            }

            if (technicalData.rsi > 70) {
                rsiOverbought.textContent = `‚ö†Ô∏è OVERBOUGHT: ${technicalData.rsi.toFixed(1)}`;
                rsiOverbought.className = 'metric-value status-warning';
            } else {
                rsiOverbought.textContent = `‚ùå RSI: ${technicalData.rsi.toFixed(1)}`;
                rsiOverbought.className = 'metric-value status-good';
            }

            // Update MACD cross
            const macdCross = document.getElementById('macd-cross');
            if (technicalData.macdHistogram > 0 && technicalData.macdHistogram > (technicalData.macdHistogram - 0.02)) {
                macdCross.textContent = '‚úÖ Bullish Cross';
                macdCross.className = 'metric-value status-good';
            } else if (technicalData.macdHistogram < 0 && technicalData.macdHistogram < (technicalData.macdHistogram + 0.02)) {
                macdCross.textContent = '‚ö†Ô∏è Bearish Cross';
                macdCross.className = 'metric-value status-warning';
            } else {
                macdCross.textContent = '‚ùå No Signal';
                macdCross.className = 'metric-value status-danger';
            }

            // Support/Resistance levels
            const supportBreak = document.getElementById('support-break');
            if (stockData.price < technicalData.support) {
                supportBreak.textContent = `üö® BROKEN: ${stockData.price.toFixed(2)}`;
                supportBreak.className = 'metric-value status-danger';
            } else {
                supportBreak.textContent = '‚úÖ Above Support';
                supportBreak.className = 'metric-value status-good';
            }
        }

        function checkDivergences() {
            const bullishDiv = document.getElementById('bullish-div');
            const bearishDiv = document.getElementById('bearish-div');
            const volumeDiv = document.getElementById('volume-div');
            const bullishRsiDiv = document.getElementById('bullish-rsi-div');
            const bearishRsiDiv = document.getElementById('bearish-rsi-div');

            // Bullish Divergence: Price makes lower lows, but RSI makes higher lows
            const recentPriceLows = Math.min(...technicalData.priceHistory.slice(-3));
            const earlierPriceLows = Math.min(...technicalData.priceHistory.slice(0, 3));
            const recentRSILows = Math.min(...technicalData.rsiHistory.slice(-3));
            const earlierRSILows = Math.min(...technicalData.rsiHistory.slice(0, 3));

            if (recentPriceLows < earlierPriceLows && recentRSILows > earlierRSILows) {
                bullishDiv.textContent = 'üü¢ BULLISH DIVERGENCE!';
                bullishDiv.className = 'metric-value status-good pulse';
                bullishRsiDiv.textContent = 'üü¢ CONFIRMED';
                bullishRsiDiv.className = 'metric-value status-good';

                // Trigger buy signal
                showNotification('üöÄ BULLISH DIVERGENCE DETECTED! Consider accumulation.');
            } else {
                bullishDiv.textContent = '‚ùå None Detected';
                bullishDiv.className = 'metric-value status-danger';
                bullishRsiDiv.textContent = '‚è≥ Waiting';
                bullishRsiDiv.className = 'metric-value status-warning';
            }

            // Bearish Divergence: Price makes higher highs, but RSI makes lower highs
            const recentPriceHighs = Math.max(...technicalData.priceHistory.slice(-3));
            const earlierPriceHighs = Math.max(...technicalData.priceHistory.slice(0, 3));
            const recentRSIHighs = Math.max(...technicalData.rsiHistory.slice(-3));
            const earlierRSIHighs = Math.max(...technicalData.rsiHistory.slice(0, 3));

            if (recentPriceHighs > earlierPriceHighs && recentRSIHighs < earlierRSIHighs) {
                bearishDiv.textContent = 'üî¥ BEARISH DIVERGENCE!';
                bearishDiv.className = 'metric-value status-danger pulse';
                bearishRsiDiv.textContent = 'üî¥ CONFIRMED';
                bearishRsiDiv.className = 'metric-value status-danger';

                // Trigger sell warning
                showNotification('‚ö†Ô∏è BEARISH DIVERGENCE DETECTED! Consider reducing exposure.');
            } else {
                bearishDiv.textContent = '‚ùå None';
                bearishDiv.className = 'metric-value status-good';
                bearishRsiDiv.textContent = '‚ùå None';
                bearishRsiDiv.className = 'metric-value status-good';
            }

            // Volume Divergence Analysis
            const avgRecentVolume = technicalData.volumeHistory.slice(-3).reduce((a, b) => a + b, 0) / 3;
            const avgEarlierVolume = technicalData.volumeHistory.slice(0, 3).reduce((a, b) => a + b, 0) / 3;
            const volumeChange = ((avgRecentVolume - avgEarlierVolume) / avgEarlierVolume * 100);

            if (Math.abs(volumeChange) > 20) {
                if (volumeChange > 0) {
                    volumeDiv.textContent = `üîä Volume Surge +${volumeChange.toFixed(1)}%`;
                    volumeDiv.className = 'metric-value status-good';
                } else {
                    volumeDiv.textContent = `üîâ Volume Drop ${volumeChange.toFixed(1)}%`;
                    volumeDiv.className = 'metric-value status-warning';
                }
            } else {
                volumeDiv.textContent = 'üìä Normal Volume';
                volumeDiv.className = 'metric-value status-good';
            }
        }

        function getEnhancedStrategyRecommendation() {
            let signals = [];
            let score = 0;

            // Fundamental signals (weight: 3x)
            if (stockData.balticsry > 2500) {
                signals.push('Baltic Dry Index bullish');
                score += 3;
            } else if (stockData.balticsry < 1500) {
                signals.push('Baltic Dry Index bearish');
                score -= 3;
            }

            if (stockData.price < 7.50) {
                signals.push('Price below major support');
                score += 2;
            } else if (stockData.price > 12.00) {
                signals.push('Price above resistance');
                score -= 2;
            }

            // Technical signals (weight: 1x)
            if (technicalData.rsi < 30) {
                signals.push('RSI oversold');
                score += 2;
            } else if (technicalData.rsi > 70) {
                signals.push('RSI overbought');
                score -= 2;
            }

            if (technicalData.macdHistogram > 0) {
                signals.push('MACD bullish');
                score += 1;
            } else {
                signals.push('MACD bearish');
                score -= 1;
            }

            // Divergence signals (weight: 2x)
            const recentPriceLows = Math.min(...technicalData.priceHistory.slice(-3));
            const earlierPriceLows = Math.min(...technicalData.priceHistory.slice(0, 3));
            const recentRSILows = Math.min(...technicalData.rsiHistory.slice(-3));
            const earlierRSILows = Math.min(...technicalData.rsiHistory.slice(0, 3));

            if (recentPriceLows < earlierPriceLows && recentRSILows > earlierRSILows) {
                signals.push('Bullish RSI divergence');
                score += 2;
            }

            // Strategy determination
            if (score >= 3) {
                return { action: 'STRONG BUY', confidence: 'HIGH', signals };
            } else if (score >= 1) {
                return { action: 'BUY', confidence: 'MEDIUM', signals };
            } else if (score <= -3) {
                return { action: 'SELL', confidence: 'HIGH', signals };
            } else if (score <= -1) {
                return { action: 'WEAK SELL', confidence: 'MEDIUM', signals };
            } else {
                return { action: 'HOLD', confidence: 'MEDIUM', signals };
            }
        }

        // Export functionality for daily reports
        function exportDailyReport() {
            const report = generateDailyReport();
            const reportText = `
CMB.TECH Daily Investment Report
Generated: ${new Date().toLocaleDateString()}

POSITION SUMMARY:
- Shares Owned: ${report.position.shares.toLocaleString()}
- Current Price: ${report.position.currentPrice.toFixed(2)}
- Position Value: ${report.position.totalValue.toLocaleString()}
- Daily P&L: ${report.position.dailyPL.toFixed(0)}

MARKET METRICS:
- Baltic Dry Index: ${report.marketMetrics.balticDryIndex}
- Price to NAV: ${report.marketMetrics.priceToNAV}
- Strategy: ${report.strategy}

ALERTS:
${report.alerts.map(alert => `- ${alert.message}`).join('\n')}

Next Key Date: ${report.nextEarnings}
            `;

            // Create downloadable report
            const blob = new Blob([reportText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `CMBT_Daily_Report_${new Date().toISOString().split('T')[0]}.txt`;
            a.click();
            URL.revokeObjectURL(url);

            showNotification('Daily report exported!');
        }

        // Add export button to daily summary
        document.addEventListener('DOMContentLoaded', () => {
            const dailySummary = document.getElementById('daily-summary');
            const exportBtn = document.createElement('button');
            exportBtn.className = 'update-btn';
            exportBtn.textContent = 'Export Daily Report';
            exportBtn.onclick = exportDailyReport;
            exportBtn.style.marginTop = '15px';
            exportBtn.style.width = '100%';
            dailySummary.appendChild(exportBtn);
        });

        // Real-time monitoring simulation
        setInterval(() => {
            const report = generateDailyReport();

            // Check for critical alerts
            const criticalAlerts = report.alerts.filter(alert => alert.urgency === 'high');
            if (criticalAlerts.length > 0) {
                criticalAlerts.forEach(alert => {
                    showNotification(`üö® ${alert.message}`);
                });
            }
        }, 60000); // Check every minute

        // Market hours detection
        function isMarketOpen() {
            const now = new Date();
            const hour = now.getHours();
            const day = now.getDay();

            // Simplified: weekdays 9:30 AM - 4:00 PM ET
            return day >= 1 && day <= 5 && hour >= 9 && hour <= 16;
        }

        function updateMarketStatus() {
            const isOpen = isMarketOpen();
            const statusElement = document.createElement('div');
            statusElement.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: ${isOpen ? '#00b894' : '#636e72'};
                color: white;
                padding: 10px 20px;
                border-radius: 25px;
                font-weight: 600;
                font-size: 0.9rem;
                z-index: 1000;
            `;
            statusElement.textContent = isOpen ? 'üü¢ Market Open' : 'üî¥ Market Closed';
            statusElement.id = 'market-status';

            // Remove existing status
            const existing = document.getElementById('market-status');
            if (existing) existing.remove();

            document.body.appendChild(statusElement);
        }

        // Initialize market status
        updateMarketStatus();
        setInterval(updateMarketStatus, 60000); // Update every minute
    </script>
</body>
</html>